*05-04-2025:*
### Что уже работает:

* Сервер Express запущен и слушает порт 5000
* Подключение к MongoDB Atlas успешно установлено
* Логирование настроено с использованием winston и rotating-file-stream
* Временные маршруты API настроены в качестве заглушек
* Swagger документация доступна по адресу http://localhost:5000/api-docs
* Аккаунт AWS успешно создан. (*Ключи доступа сохранены в переменных окружения.*)
* База данных AWS RDS PostgreSQL создана, данные доступа сохранены в .env:
   * Установлены пакеты pg pg-hstore sequelize sequelize-cli bcrypt jsonwebtoken.
   * Использование доступа к PostgreSQL из Node.js с использованием ORM Sequelize
   * Созданы модели данных для работы с пользователями для SQL-базы данных: User, Permission, RolePermission
   * Подключение к AWS RDS PostgreSQL успешно установлено, скрипт создал все 4 таблицы и 2 enum types.
   * Создан/Активирован пользователь-суперадмин, username: 'admin', email: 'admin@iotmonsys.com', password: 'admin123'
* Инстанс EC2 создан. 

*06-04-2025:*
### Что готовое добавлено:
Есть полностью функциональный **симулятор IoT-устройств**, который:
* Генерирует данные различных типов (температура, влажность, освещение и др.)
* Отправляет данные по UDP на указанный хост и порт
* Принимает управляющие команды для изменения поведения устройств
* Симулирует аномалии для тестирования обработки ошибок
* Имеет тесты, которые проверяют его функциональность

*08-04-2025:*
### Что готовое добавлено:
Разработан полноценный **UDP Listener** для приема и обработки данных от IoT-устройств:

* **Основная функциональность UDP Listener**:
  * Прием UDP-сообщений от устройств
  * Валидация входящих данных
  * Сохранение данных в MongoDB
  * Отправка данных в AWS Kinesis для дальнейшей обработки
  * Логирование всех операций

* **Инновационная функциональность режима обнаружения устройств**:
  * Автоматическое обнаружение и регистрация новых устройств
  * Управление режимом обнаружения через API (включение/выключение, настройка времени)
  * Защита от несанкционированного доступа (устройства регистрируются только в режиме обнаружения)
  * Автоматическое отключение режима обнаружения по таймеру для безопасности

* **Разработан полный набор тестов для **UDP Listener**, который включает**:

  * **Тесты для валидации данных** (`dataValidator.test.js`):
    * Проверка корректных данных устройств
    * Проверка отсутствующих полей (deviceId, type, value, timestamp)
    * Проверка некорректных типов значений
    * Проверка некорректных форматов временных меток

  * **Тесты для сервиса данных устройств** (`deviceDataService.test.js`):
    * Функциональность режима обнаружения (включение, отключение, автоматический тайм-аут)
    * Сохранение данных для зарегистрированных устройств
    * Обработка незарегистрированных устройств при выключенном режиме обнаружения
    * Регистрация новых устройств при включенном режиме обнаружения

  * **Тесты для основной функциональности UDP Listener** (`udpListener.test.js`):
    * Настройка обработчиков событий
    * Запуск и остановка сервера
    * Обработка сообщений и валидация входящих данных

  * **Тесты для API режима обнаружения** (`discoveryApi.test.js`):
    * Получение текущего статуса режима обнаружения
    * Включение/выключение режима обнаружения
    * Обработка некорректных запросов

Улучшена функциональность валидации данных, в частности проверка временных меток, для обеспечения корректности входящих данных. Все тесты успешно проходят и обеспечивают хорошее покрытие кода.

Все компоненты успешно интегрированы и протестированы. UDP Listener готов к развертыванию и может быть использован для приема данных от реальных или симулированных IoT-устройств.

* P.S. В будущем, при желании улучшить тесты, можно рассмотреть:
  * Добавление интеграционных тестов с использованием in-memory MongoDB
  * Тестирование граничных случаев и обработки ошибок
  * Тестирование производительности для высоконагруженных сценариев
  * Интеграционные тесты с использованием AWS Kinesis

*09-04-2025:*
### Что готовое добавлено:
Перевод проекта на единый логер (модуль /logger-node), универсальный как для модулей в формате CommonJS (это работа с UDP), так и для модулей в формате ES6 (backend).

Добавлена промежуточный бранч dev. В GitHub Actions добавлен скрипт, контролирующий, чтобы push master был только через pull request (к dev).

#### Остался не переключенный модуль udp-listener - надо сделать по примеру udp-simulator

После внесения изменений в код, необходимо выполнить следующие команды:
```bash
git checkout udp-listener # переключиться на ветку udp-listener
git checkout master -- logger-node # загрузить логер
cd udp-listener # войти в папку udp-listener
npm install ../logger-node
```

*18-04-2025:*
### Что готовое добавлено:
Полностью отработан и оттестирован на 3 модулях (simulator (CommonJS), udp-listener (CommonJS), backend (ES6) логер(отдельный модуль logger-node)).

Проект переведен на ASW 3.0

*23-04-2025:*

Модули взаимодействуют.
При запуске udp-listener и simulator данные принимаются и вносятся корректно в MongoDB.

*24-04-2025:*
### Что готовое добавлено:
Триггер Atlas MongoDB настроен на добавление нового устройства

Настроена AWS Lambda + AWS Gateway (прием данных). Настроена AWS SNS (email). Написана Java-функция для тестирования - отправляет полученные данные устройства.

*25-04-2025:*
### Что готовое добавлено:
* Отправка email по триггеру от Atlas MongoDB на добавление нового устройства.
* Отправка sms (sms Sandbox, зарезервированный номер) по триггеру от Atlas MongoDB на добавление нового устройства.
* JWT-токен в письме-уведомлении о новых устройствах, к каждой ссылке, со сроком действия 10мин.
* AWS API Gateway - новый Endpoint для аппрува/блокировки/удаления нового устройства
* LAMBDA-функция (Java) выполнения операций при запросе на данный endpoint
#### Что доделать:
* LAMBDAs: approve и block работают, меняют статус в MongoDB; но удаление - нет. Поставить логирование, понять причину отказа "Invalid request"

*28-04-2025
### Исправлено
* LAMBDA-функция (Java) выполнения операции удаления

*09-05-2025
### Что готовое добавлено:
* Для ветки lambda-dev (/lambdas) переход на AWS-SAM (Lambda Layers)

#### Что доделать:
Авторизация доступа к lambda-функциям (самоуправление) - через AWS IAM (IAM Policy)


